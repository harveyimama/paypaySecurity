package com.techland.paypay.security.factories;import com.techland.paypay.contracts.PayPayEvent; import com.techland.paypay.contracts.EventSubscriber;import com.techland.paypay.contracts.StateSubscriber;import com.techland.paypay.contracts.Subscriber; import java.util.ArrayList;import java.util.List;import java.util.concurrent.ConcurrentHashMap;import org.springframework.stereotype.Component;

import com.techland.paypay.security.events.MerchantUserAddedEvent;
import com.techland.paypay.security.subscribers.UserAddedEmailer; @Component("paypaySub")  public class SubscriberFactory { private UserAddedEmailer useraddedemailer; private  ConcurrentHashMap<String,List<? extends Subscriber>> finalList = new ConcurrentHashMap<>(); private  List<EventSubscriber> eventlist = new ArrayList<EventSubscriber>(); private  List<StateSubscriber> statelist = new ArrayList<StateSubscriber>();public SubscriberFactory( UserAddedEmailer useraddedemailer ){ this.useraddedemailer=useraddedemailer;} public  <R extends PayPayEvent>  ConcurrentHashMap<String,List<? extends Subscriber>> getInstance(R event) {  List<EventSubscriber> eventlist = new ArrayList<EventSubscriber>();		 List<StateSubscriber> statelist = new ArrayList<StateSubscriber>(); if (event instanceof MerchantUserAddedEvent) { eventlist.add(useraddedemailer);} return	getFinalList(eventlist,statelist); }  public  List<EventSubscriber> getAllEventSubscribers() {  if (eventlist.isEmpty()) {  eventlist.add(useraddedemailer); } return eventlist; }  public  List<StateSubscriber> getAllStateSubscribers() {  if (statelist.isEmpty()) {} return statelist; }  private ConcurrentHashMap<String,List<? extends Subscriber>> getFinalList (List<EventSubscriber> eventlist,List<StateSubscriber> statelist) { ConcurrentHashMap<String, List<? extends Subscriber>> finalList = new ConcurrentHashMap<>();  if (eventlist != null) finalList.put("events",eventlist);  if (statelist != null) finalList.put("states",statelist);  return finalList;}} 